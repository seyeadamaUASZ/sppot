<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout">
<head>
<meta charset="utf-8">
<title>Gestion des utilisateurs</title>
</head>
<body>
<div layout:fragment="content">

<div class="page-title">
              <div class="title_left">
                <h5>Liste des utilisateurs</h5>
              </div>

              <div class="title_right">
                <div class="col-md-5 col-sm-5 col-xs-12 form-group pull-right top_search">
                  <div class="input-group">
                    <input type="text" class="form-control" placeholder="Recchercher...">
                    <span class="input-group-btn">
                      <button class="btn btn-secondary" type="button"> <i class="fa fa-search"></i> </button>
                    </span>
                  </div>
                </div>
              </div>
            </div>
<div class="row">
  
      <div class="col-md-12 col-sm-12 ">
                <div class="x_panel">
                  <div class="x_title">
                    <h6> <i class="fa fa-user"></i> </h6>
                    <ul class="nav navbar-right panel_toolbox">
                      <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a class="dropdown-item" href="#">Settings 1</a>
                            <a class="dropdown-item" href="#">Settings 2</a>
                          </div>
                      </li>
                      <li><a class="close-link"><i class="fa fa-close"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>
                  <div class="x_content">
                      <div class="row">
                          <div class="col-sm-12">
                            <div class="card-box table-responsive">
                    <table id="datatable" class="table table-striped table-bordered" style="width:100%">
                      <thead>
                        <tr>
                         <th></th>
                          <th>Id</th>
                          <th>Nom Prénom</th>
                          <th>Email</th>
                          <th>Username</th>
                         
                         
                        </tr>
                      </thead>
                      <tbody> 
                        <tr th:each="u: ${users}">
                               <td>
                                    <a  th:href="@{getuser/(id=${u.id})}" class="btn btn-default act1"> <i class="fa fa-edit"></i></a> |
                                    <a href="#" class="btn btn-default dbtn"><i class="fa fa-trash"></i></a></td>
                               <td th:text="${u.id}"></td>
                               <td th:text="${u.nom+' '+u.prenom}"></td>
                                <td th:text="${u.email}"></td>
                                <td th:text="${u.username}"></td>
                                
                            </tr>
                      </tbody>
                    </table>
                  </div>
                  </div>
              </div>
            </div>
                </div>
            </div>
            
            <div class="col-md-12 col-sm-12 myForm">
             <div class="x_panel">
				<div class="x_title">
					<h2> <i class="fa fa-edit"></i>Ajout/Modification</h2>
					<ul class="nav navbar-right panel_toolbox">
						<li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="fa fa-wrench"></i></a>
							<ul class="dropdown-menu" role="menu">
								<li><a class="dropdown-item" href="#">Settings 1</a>
								</li>
								<li><a class="dropdown-item" href="#">Settings 2</a>
								</li>
							</ul>
						</li>
						<li><a class="close-link"><i class="fa fa-close"></i></a>
						</li>
					</ul>
					<div class="clearfix"></div>
				</div>
				<div class="x_content">
					<br />
					<form  th:action="@{saveUser}" method="post">
					   <input type="hidden"  id="id" name="id"  class="form-control ">
						<div class="item form-group">
							<label class="col-form-label col-md-3 col-sm-3 label-align" for="first-name">Nom <span class="required">*</span>
							</label>
							<div class="col-md-6 col-sm-6 ">
								<input type="text"  id="nom" name="nom" required="required" class="form-control ">
							</div>
						</div>
						<div class="item form-group">
							<label class="col-form-label col-md-3 col-sm-3 label-align" for="last-name">Prénom <span class="required">*</span>
							</label>
							<div class="col-md-6 col-sm-6 ">
								<input type="text" id="prenom" name="prenom" required="required" class="form-control">
							</div>
						</div>
						<div class="item form-group">
							<label for="middle-name" class="col-form-label col-md-3 col-sm-3 label-align">Email</label>
							<div class="col-md-6 col-sm-6 ">
								<input id="email" class="form-control" type="email" name="email">
							</div>
						</div>
						
						<div class="item form-group">
							<label for="middle-name" class="col-form-label col-md-3 col-sm-3 label-align">Username</label>
							<div class="col-md-6 col-sm-6 ">
								<input id="username" class="form-control" type="text" name="username">
							</div>
						</div>
						
						<div class="item form-group">
							<label for="middle-name" class="col-form-label col-md-3 col-sm-3 label-align">Rôle</label>
							<div class="col-md-6 col-sm-6 ">
								<select class="form-control app" id="nomRole" name="nomRole">
                                    <option  th:value="ADMIN">Administrateur</option>
                                    <option  th:value="MEMBRE">Membre</option>
                                   </select>
							</div>
						</div>
						<div class="ln_solid"></div>
						<div class="item form-group">
							<div class="col-md-6 col-sm-6 offset-md-3">
								<button class="btn btn-danger" type="button">Annuler</button>
								<button class="btn btn-info" type="reset">Effacer</button>
								<button type="submit" class="btn btn-success">Ajouter</button>
							</div>
						</div>

						</form>
					</div>
				</div>            	
            </div>
  </div>
  
   <script src="vendor1/jquery/dist/jquery.min.js"></script>
   <script type="text/javascript"> 
   $(document).ready(function(event){
	   console.log('Hello wordl !!');   
	   $('.act1').on('click', function(event) {
           event.preventDefault();  
           var href = $(this).attr('href');
           $.get(href, function(user){
           $('.myForm #id').val(user.id)
           $('.myForm #nom').val(user.nom)
           $('.myForm #prenom').val(user.prenom)
           $('.myForm #email').val(user.email)
           $('.myForm #username').val(user.username)
         
           })
        })
   })
   </script>
 
</div>

</body>
</html>